crystal_doc_search_index_callback({"repository_name":"lucky_router","body":"# LuckyRouter\n\n[![API Documentation Website](https://img.shields.io/website?down_color=red&down_message=Offline&label=API%20Documentation&up_message=Online&url=https%3A%2F%2Fluckyframework.github.io%2Flucky_router%2F)](https://luckyframework.github.io/lucky_router)\n\nA library for routing HTTP request with Crystal\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  lucky_router:\n    github: luckyframework/lucky_router\n```\n\n## Usage\n\n```crystal\nrequire \"lucky_router\"\n\nrouter = LuckyRouter::Matcher(Symbol).new\n\nrouter.add(\"get\", \"/users\", :index)\nrouter.add(\"delete\", \"/users/:id\", :delete)\n\nrouter.match(\"get\", \"/users\").payload # :index\nrouter.match(\"get\", \"/users\").params # {} of String => String\nrouter.match(\"delete\", \"/users/1\").payload # :delete\nrouter.match(\"delete\", \"/users/1\").params # {\"id\" => \"1\"}\nrouter.match(\"get\", \"/missing_route\").payload # nil\n```\n\n## Contributing\n\n1. Fork it ( https://github.com/luckyframework/lucky_router/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Make your changes\n4. Run `./bin/test` to run the specs, build shards, and check formatting\n5. Commit your changes (git commit -am 'Add some feature')\n6. Push to the branch (git push origin my-new-feature)\n7. Create a new Pull Request\n\n## Contributors\n\n- [paulcsmith](https://github.com/paulcsmith) Paul Smith - creator, maintainer\n","program":{"html_id":"lucky_router/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"lucky_router","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"lucky_router/LuckyRouter","path":"LuckyRouter.html","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.4.2\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"lucky_router/LuckyRouter/DuplicateRouteError","path":"LuckyRouter/DuplicateRouteError.html","kind":"class","full_name":"LuckyRouter::DuplicateRouteError","name":"DuplicateRouteError","abstract":false,"superclass":{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},"ancestors":[{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},{"html_id":"lucky_router/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(method,new_path,duplicated_path)-class-method","html_id":"new(method,new_path,duplicated_path)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":""},{"name":"new_path","doc":null,"default_value":"","external_name":"new_path","restriction":""},{"name":"duplicated_path","doc":null,"default_value":"","external_name":"duplicated_path","restriction":""}],"args_string":"(method, new_path, duplicated_path)","args_html":"(method, new_path, duplicated_path)","location":{"filename":"src/lucky_router/errors.cr","line_number":15,"url":null},"def":{"name":"new","args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":""},{"name":"new_path","doc":null,"default_value":"","external_name":"new_path","restriction":""},{"name":"duplicated_path","doc":null,"default_value":"","external_name":"duplicated_path","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(method, new_path, duplicated_path)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/Fragment","path":"LuckyRouter/Fragment.html","kind":"class","full_name":"LuckyRouter::Fragment(T)","name":"Fragment","abstract":false,"superclass":{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":"A fragment represents possible combinations for a part of the path. The first/top\nfragment represents the first \"part\" of a path.\n\nThe fragment contains the possible static parts or a single dynamic part\nEach static part or dynamic part has another fragment, that represents the\nnext set of fragments that could match. This is a bit confusing so let's dive\ninto an example:\n\n * `/users/foo`\n * `/users/:id`\n * `/posts/foo`\n\nThe Fragment would represent the possible combinations for the first part\n\n```\n# 'nil' because there is no route with a dynamic part in the first slot\nfragment.dynamic_part # nil\n\n# This returns a Hash whose keys are the possible values, and a value for the\n*next* Fragment\nfragment.static_parts\n\n# Would return:\n{\"users\" => Fragment, \"posts\" => Fragment}\n\n# The Fragment in the 'users' key would have:\n\n# Fragment.new(PathPart(\":id\"))\nfragment.dynamic_part\n\n# Static parts\nfragment.static_parts\n{\"foo\" => Fragment}\n```\n\n## Gotcha\n\nThe last fragment of a path is \"empty\". It does not have static parts or\ndynamic parts","summary":"<p>A fragment represents possible combinations for a part of the path.</p>","class_methods":[],"constructors":[{"id":"new(path_part)-class-method","html_id":"new(path_part)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"path_part","doc":null,"default_value":"","external_name":"path_part","restriction":""}],"args_string":"(path_part)","args_html":"(path_part)","location":{"filename":"src/lucky_router/fragment.cr","line_number":50,"url":null},"def":{"name":"new","args":[{"name":"path_part","doc":null,"default_value":"","external_name":"path_part","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = Fragment(T).allocate\n_.initialize(path_part)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"add_part(path_part:PathPart):Fragment(T)-instance-method","html_id":"add_part(path_part:PathPart):Fragment(T)-instance-method","name":"add_part","doc":null,"summary":null,"abstract":false,"args":[{"name":"path_part","doc":null,"default_value":"","external_name":"path_part","restriction":"PathPart"}],"args_string":"(path_part : PathPart) : Fragment(T)","args_html":"(path_part : <a href=\"../LuckyRouter/PathPart.html\">PathPart</a>) : <a href=\"../LuckyRouter/Fragment.html\">Fragment</a>(T)","location":{"filename":"src/lucky_router/fragment.cr","line_number":64,"url":null},"def":{"name":"add_part","args":[{"name":"path_part","doc":null,"default_value":"","external_name":"path_part","restriction":"PathPart"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Fragment(T)","visibility":"Public","body":"if path_part.glob?\n  self.glob_part = Fragment(T).new(path_part: path_part)\nelse\n  if path_part.path_variable?\n    existing = self.dynamic_parts.find do |fragment|\n      fragment.path_part == path_part\n    end\n    if existing\n      return existing\n    end\n    fragment = Fragment(T).new(path_part: path_part)\n    self.dynamic_parts << fragment\n    fragment\n  else\n    __temp_24 = path_part.part\n    __temp_25 = static_parts\n    __temp_25[__temp_24]? || (__temp_25[__temp_24] = Fragment(T).new(path_part: path_part))\n  end\nend"}},{"id":"dynamic?-instance-method","html_id":"dynamic?-instance-method","name":"dynamic?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/fragment.cr","line_number":79,"url":null},"def":{"name":"dynamic?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path_part.path_variable?"}},{"id":"dynamic_parts-instance-method","html_id":"dynamic_parts-instance-method","name":"dynamic_parts","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/fragment.cr","line_number":41,"url":null},"def":{"name":"dynamic_parts","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@dynamic_parts"}},{"id":"find(parts:Array(String),method:String):Match(T)|NoMatch-instance-method","html_id":"find(parts:Array(String),method:String):Match(T)|NoMatch-instance-method","name":"find","doc":"This looks for a matching fragment for the given parts\nand returns NoMatch if one is not found","summary":"<p>This looks for a matching fragment for the given parts and returns NoMatch if one is not found</p>","abstract":false,"args":[{"name":"parts","doc":null,"default_value":"","external_name":"parts","restriction":"Array(String)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"}],"args_string":"(parts : Array(String), method : String) : Match(T) | NoMatch","args_html":"(parts : Array(String), method : String) : <a href=\"../LuckyRouter/Match.html\">Match</a>(T) | <a href=\"../LuckyRouter/NoMatch.html\">NoMatch</a>","location":{"filename":"src/lucky_router/fragment.cr","line_number":55,"url":null},"def":{"name":"find","args":[{"name":"parts","doc":null,"default_value":"","external_name":"parts","restriction":"Array(String)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Match(T) | NoMatch","visibility":"Public","body":"(find_match(parts, method)) || NoMatch.new"}},{"id":"find_match(path_parts:Array(String),method:String):Match(T)?-instance-method","html_id":"find_match(path_parts:Array(String),method:String):Match(T)?-instance-method","name":"find_match","doc":null,"summary":null,"abstract":false,"args":[{"name":"path_parts","doc":null,"default_value":"","external_name":"path_parts","restriction":"Array(String)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"}],"args_string":"(path_parts : Array(String), method : String) : Match(T)?","args_html":"(path_parts : Array(String), method : String) : <a href=\"../LuckyRouter/Match.html\">Match</a>(T)?","location":{"filename":"src/lucky_router/fragment.cr","line_number":83,"url":null},"def":{"name":"find_match","args":[{"name":"path_parts","doc":null,"default_value":"","external_name":"path_parts","restriction":"Array(String)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Match(T) | ::Nil","visibility":"Public","body":"if path_parts.empty?\n  return match_for_method(method)\nend\npath_part = path_parts.first\nrest = path_parts[1..]\n((find_match_with_static_parts(path_part, rest, method)) || (find_match_with_dynamics(path_part, rest, method))) || (find_match_with_glob(path_part, rest, method))\n"}},{"id":"glob_part:Fragment(T)?-instance-method","html_id":"glob_part:Fragment(T)?-instance-method","name":"glob_part","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Fragment(T)?","args_html":" : <a href=\"../LuckyRouter/Fragment.html\">Fragment</a>(T)?","location":{"filename":"src/lucky_router/fragment.cr","line_number":43,"url":null},"def":{"name":"glob_part","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Fragment(T) | ::Nil","visibility":"Public","body":"@glob_part"}},{"id":"glob_part=(glob_part:Fragment(T)?)-instance-method","html_id":"glob_part=(glob_part:Fragment(T)?)-instance-method","name":"glob_part=","doc":null,"summary":null,"abstract":false,"args":[{"name":"glob_part","doc":null,"default_value":"","external_name":"glob_part","restriction":"Fragment(T) | ::Nil"}],"args_string":"(glob_part : Fragment(T)?)","args_html":"(glob_part : <a href=\"../LuckyRouter/Fragment.html\">Fragment</a>(T)?)","location":{"filename":"src/lucky_router/fragment.cr","line_number":43,"url":null},"def":{"name":"glob_part=","args":[{"name":"glob_part","doc":null,"default_value":"","external_name":"glob_part","restriction":"Fragment(T) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@glob_part = glob_part"}},{"id":"match_for_method(method)-instance-method","html_id":"match_for_method(method)-instance-method","name":"match_for_method","doc":null,"summary":null,"abstract":false,"args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":""}],"args_string":"(method)","args_html":"(method)","location":{"filename":"src/lucky_router/fragment.cr","line_number":94,"url":null},"def":{"name":"match_for_method","args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"payload = method_to_payload[method]?\npayload ? Match(T).new(payload, Hash(String, String).new) : nil\n"}},{"id":"method_to_payload-instance-method","html_id":"method_to_payload-instance-method","name":"method_to_payload","doc":"Every path can have multiple request methods\nand since each fragment represents a request path\nthe final step to finding the payload is to search for a matching request method","summary":"<p>Every path can have multiple request methods and since each fragment represents a request path the final step to finding the payload is to search for a matching request method</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/fragment.cr","line_number":47,"url":null},"def":{"name":"method_to_payload","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@method_to_payload"}},{"id":"path_part:PathPart-instance-method","html_id":"path_part:PathPart-instance-method","name":"path_part","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : PathPart","args_html":" : <a href=\"../LuckyRouter/PathPart.html\">PathPart</a>","location":{"filename":"src/lucky_router/fragment.cr","line_number":48,"url":null},"def":{"name":"path_part","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"PathPart","visibility":"Public","body":"@path_part"}},{"id":"process_parts(parts:Array(PathPart),method:String,payload:T)-instance-method","html_id":"process_parts(parts:Array(PathPart),method:String,payload:T)-instance-method","name":"process_parts","doc":null,"summary":null,"abstract":false,"args":[{"name":"parts","doc":null,"default_value":"","external_name":"parts","restriction":"Array(PathPart)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":"T"}],"args_string":"(parts : Array(PathPart), method : String, payload : T)","args_html":"(parts : Array(<a href=\"../LuckyRouter/PathPart.html\">PathPart</a>), method : String, payload : T)","location":{"filename":"src/lucky_router/fragment.cr","line_number":59,"url":null},"def":{"name":"process_parts","args":[{"name":"parts","doc":null,"default_value":"","external_name":"parts","restriction":"Array(PathPart)"},{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":"T"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"leaf_fragment = parts.reduce(self) do |fragment, part|\n  fragment.add_part(part)\nend\nleaf_fragment.method_to_payload[method] = payload\n"}},{"id":"static_parts-instance-method","html_id":"static_parts-instance-method","name":"static_parts","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/fragment.cr","line_number":42,"url":null},"def":{"name":"static_parts","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@static_parts"}}],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/InvalidGlobError","path":"LuckyRouter/InvalidGlobError.html","kind":"class","full_name":"LuckyRouter::InvalidGlobError","name":"InvalidGlobError","abstract":false,"superclass":{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},"ancestors":[{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},{"html_id":"lucky_router/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(glob)-class-method","html_id":"new(glob)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"glob","doc":null,"default_value":"","external_name":"glob","restriction":""}],"args_string":"(glob)","args_html":"(glob)","location":{"filename":"src/lucky_router/errors.cr","line_number":9,"url":null},"def":{"name":"new","args":[{"name":"glob","doc":null,"default_value":"","external_name":"glob","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(glob)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/InvalidPathError","path":"LuckyRouter/InvalidPathError.html","kind":"class","full_name":"LuckyRouter::InvalidPathError","name":"InvalidPathError","abstract":false,"superclass":{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},"ancestors":[{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError"},{"html_id":"lucky_router/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/LuckyRouterError","path":"LuckyRouter/LuckyRouterError.html","kind":"class","full_name":"LuckyRouter::LuckyRouterError","name":"LuckyRouterError","abstract":true,"superclass":{"html_id":"lucky_router/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"lucky_router/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"lucky_router/LuckyRouter/DuplicateRouteError","kind":"class","full_name":"LuckyRouter::DuplicateRouteError","name":"DuplicateRouteError"},{"html_id":"lucky_router/LuckyRouter/InvalidGlobError","kind":"class","full_name":"LuckyRouter::InvalidGlobError","name":"InvalidGlobError"},{"html_id":"lucky_router/LuckyRouter/InvalidPathError","kind":"class","full_name":"LuckyRouter::InvalidPathError","name":"InvalidPathError"}],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/Match","path":"LuckyRouter/Match.html","kind":"class","full_name":"LuckyRouter::Match(T)","name":"Match","abstract":false,"superclass":{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(payload,params)-class-method","html_id":"new(payload,params)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""},{"name":"params","doc":null,"default_value":"","external_name":"params","restriction":""}],"args_string":"(payload, params)","args_html":"(payload, params)","location":{"filename":"src/lucky_router/match.cr","line_number":5,"url":null},"def":{"name":"new","args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""},{"name":"params","doc":null,"default_value":"","external_name":"params","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = Match(T).allocate\n_.initialize(payload, params)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"params:Hash(String,String)-instance-method","html_id":"params:Hash(String,String)-instance-method","name":"params","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, String)","args_html":" : Hash(String, String)","location":{"filename":"src/lucky_router/match.cr","line_number":3,"url":null},"def":{"name":"params","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, String)","visibility":"Public","body":"@params"}},{"id":"payload:T-instance-method","html_id":"payload:T-instance-method","name":"payload","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : T","args_html":" : T","location":{"filename":"src/lucky_router/match.cr","line_number":2,"url":null},"def":{"name":"payload","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"T","visibility":"Public","body":"@payload"}}],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/Matcher","path":"LuckyRouter/Matcher.html","kind":"class","full_name":"LuckyRouter::Matcher(T)","name":"Matcher","abstract":false,"superclass":{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":"Add routes and match routes\n\n'T' is the type of the 'payload'. The 'payload' is what will be returned\nif the route matches.\n\n## Example\n\n```\n# 'T' will be 'Symbol'\nrouter = LuckyRouter::Matcher(Symbol).new\n\n# Tell the router what payload to return if matched\nrouter.add(\"get\", \"/users\", :index)\n\n# This will return :index\nrouter.match(\"get\", \"/users\").payload # :index\n```","summary":"<p>Add routes and match routes</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"add(method:String,path:String,payload:T)-instance-method","html_id":"add(method:String,path:String,payload:T)-instance-method","name":"add","doc":null,"summary":null,"abstract":false,"args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"},{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":"T"}],"args_string":"(method : String, path : String, payload : T)","args_html":"(method : String, path : String, payload : T)","location":{"filename":"src/lucky_router/matcher.cr","line_number":23,"url":null},"def":{"name":"add","args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"},{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":"T"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"all_path_parts = PathPart.split_path(path)\nvalidate!(path, all_path_parts)\noptional_parts = all_path_parts.select(&.optional?)\nglob_part = nil\nif last_part = all_path_parts.last?\n  if last_part.glob?\n    glob_part = all_path_parts.pop\n  end\nend\npath_without_optional_params = all_path_parts.reject(&.optional?)\nprocess_and_add_path(method, path_without_optional_params, payload, path)\noptional_parts.each do |optional_part|\n  path_without_optional_params << optional_part\n  process_and_add_path(method, path_without_optional_params, payload, path)\nend\nif glob_part\n  path_without_optional_params << glob_part\n  process_and_add_path(method, path_without_optional_params, payload, path)\nend\n"}},{"id":"match(method:String,path_to_match:String):Match(T)?-instance-method","html_id":"match(method:String,path_to_match:String):Match(T)?-instance-method","name":"match","doc":null,"summary":null,"abstract":false,"args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path_to_match","doc":null,"default_value":"","external_name":"path_to_match","restriction":"String"}],"args_string":"(method : String, path_to_match : String) : Match(T)?","args_html":"(method : String, path_to_match : String) : <a href=\"../LuckyRouter/Match.html\">Match</a>(T)?","location":{"filename":"src/lucky_router/matcher.cr","line_number":67,"url":null},"def":{"name":"match","args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path_to_match","doc":null,"default_value":"","external_name":"path_to_match","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Match(T) | ::Nil","visibility":"Public","body":"parts = path_to_match.split('/')\nif parts.last.blank?\n  parts.pop\nend\nmatch = root.find(parts, method)\nif match.is_a?(Match)\n  match\nend\n"}},{"id":"match!(method:String,path_to_match:String):Match(T)-instance-method","html_id":"match!(method:String,path_to_match:String):Match(T)-instance-method","name":"match!","doc":null,"summary":null,"abstract":false,"args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path_to_match","doc":null,"default_value":"","external_name":"path_to_match","restriction":"String"}],"args_string":"(method : String, path_to_match : String) : Match(T)","args_html":"(method : String, path_to_match : String) : <a href=\"../LuckyRouter/Match.html\">Match</a>(T)","location":{"filename":"src/lucky_router/matcher.cr","line_number":77,"url":null},"def":{"name":"match!","args":[{"name":"method","doc":null,"default_value":"","external_name":"method","restriction":"String"},{"name":"path_to_match","doc":null,"default_value":"","external_name":"path_to_match","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Match(T)","visibility":"Public","body":"(match(method, path_to_match)) || (raise(\"No matching route found for: #{path_to_match}\"))"}},{"id":"normalized_paths-instance-method","html_id":"normalized_paths-instance-method","name":"normalized_paths","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/matcher.cr","line_number":21,"url":null},"def":{"name":"normalized_paths","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@normalized_paths"}},{"id":"root-instance-method","html_id":"root-instance-method","name":"root","doc":"starting point from which all fragments are located","summary":"<p>starting point from which all fragments are located</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/matcher.cr","line_number":20,"url":null},"def":{"name":"root","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@root"}}],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/NoMatch","path":"LuckyRouter/NoMatch.html","kind":"class","full_name":"LuckyRouter::NoMatch","name":"NoMatch","abstract":false,"superclass":{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/PathNormalizer","path":"LuckyRouter/PathNormalizer.html","kind":"class","full_name":"LuckyRouter::PathNormalizer","name":"PathNormalizer","abstract":false,"superclass":{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"lucky_router/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"DEFAULT_PATH_VARIABLE_NAME","name":"DEFAULT_PATH_VARIABLE_NAME","value":"\":path_variable\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":null,"summary":null,"class_methods":[{"id":"normalize(path_parts:Array(PathPart)):String-class-method","html_id":"normalize(path_parts:Array(PathPart)):String-class-method","name":"normalize","doc":null,"summary":null,"abstract":false,"args":[{"name":"path_parts","doc":null,"default_value":"","external_name":"path_parts","restriction":"Array(PathPart)"}],"args_string":"(path_parts : Array(PathPart)) : String","args_html":"(path_parts : Array(<a href=\"../LuckyRouter/PathPart.html\">PathPart</a>)) : String","location":{"filename":"src/lucky_router/path_normalizer.cr","line_number":4,"url":null},"def":{"name":"normalize","args":[{"name":"path_parts","doc":null,"default_value":"","external_name":"path_parts","restriction":"Array(PathPart)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"path_parts.map do |path_part|\n  normalize(path_part)\nend.join('/')"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"lucky_router/LuckyRouter/PathPart","path":"LuckyRouter/PathPart.html","kind":"struct","full_name":"LuckyRouter::PathPart","name":"PathPart","abstract":false,"superclass":{"html_id":"lucky_router/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"lucky_router/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"lucky_router/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"lucky_router/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"lucky_router","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"lucky_router/LuckyRouter","kind":"module","full_name":"LuckyRouter","name":"LuckyRouter"},"doc":"A PathPart represents a single section of a path\n\nIt can be a static path\n\n```\npath_part = PathPart.new(\"users\")\npath_part.path_variable? => false\npath_part.optional? => false\npath_part.name => \"users\"\n```\n\nIt can be a path variable\n\n```\npath_part = PathPart.new(\":id\")\npath_part.path_variable? => true\npath_part.optional? => false\npath_part.name => \"id\"\n```\n\nIt can be optional\n\n```\npath_part = PathPart.new(\"?users\")\npath_part.path_variable? => false\npath_part.optional? => true\npath_part.name => \"users\"\n```","summary":"<p>A PathPart represents a single section of a path</p>","class_methods":[{"id":"split_path(path:String):Array(PathPart)-class-method","html_id":"split_path(path:String):Array(PathPart)-class-method","name":"split_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"args_string":"(path : String) : Array(PathPart)","args_html":"(path : String) : Array(<a href=\"../LuckyRouter/PathPart.html\">PathPart</a>)","location":{"filename":"src/lucky_router/path_part.cr","line_number":30,"url":null},"def":{"name":"split_path","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(PathPart)","visibility":"Public","body":"parts = path.split('/')\nif parts.last.blank?\n  parts.pop\nend\nparts.map do |part|\n  new(part)\nend\n"}}],"constructors":[{"id":"new(part)-class-method","html_id":"new(part)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"part","doc":null,"default_value":"","external_name":"part","restriction":""}],"args_string":"(part)","args_html":"(part)","location":{"filename":"src/lucky_router/path_part.cr","line_number":38,"url":null},"def":{"name":"new","args":[{"name":"part","doc":null,"default_value":"","external_name":"part","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(part)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"glob?-instance-method","html_id":"glob?-instance-method","name":"glob?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/path_part.cr","line_number":54,"url":null},"def":{"name":"glob?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"part.starts_with?('*')"}},{"id":"name-instance-method","html_id":"name-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/path_part.cr","line_number":41,"url":null},"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"name = ((part.lchop('?')).lchop('*')).lchop(':')\nunnamed_glob?(name) ? \"glob\" : name\n"}},{"id":"optional?-instance-method","html_id":"optional?-instance-method","name":"optional?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/path_part.cr","line_number":46,"url":null},"def":{"name":"optional?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"part.starts_with?('?')"}},{"id":"part:String-instance-method","html_id":"part:String-instance-method","name":"part","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/lucky_router/path_part.cr","line_number":36,"url":null},"def":{"name":"part","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@part"}},{"id":"path_variable?-instance-method","html_id":"path_variable?-instance-method","name":"path_variable?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/path_part.cr","line_number":50,"url":null},"def":{"name":"path_variable?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((part.starts_with?(':')) || (part.starts_with?(\"?:\"))) || glob?"}},{"id":"validate!-instance-method","html_id":"validate!-instance-method","name":"validate!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/lucky_router/path_part.cr","line_number":58,"url":null},"def":{"name":"validate!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if invalid_glob?\n  raise(InvalidGlobError.new(part))\nend"}}],"macros":[],"types":[]}]}]}})